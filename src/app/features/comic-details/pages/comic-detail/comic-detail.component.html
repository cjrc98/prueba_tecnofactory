<article class="p-6 pb-28">
  @if (comic() && !isLoading()) {
  <div class="flex flex-col md:flex-row gap-6">
    <img
      [src]="comic()?.image"
      [alt]="comic()?.title"
      class="w-full md:w-1/3 rounded-[15px] shadow object-fill"
    />

    <div class="flex-1">
      <h1 class="text-3xl font-bold mb-4">{{ comic()?.title }}</h1>

      @if (comic()?.description?.trim()) {
      <p class="text-gray-600 mb-4 whitespace-pre-wrap">
        {{ comic()?.description }}
      </p>
      } @if (comic()?.onsaleDate) {
      <p class="text-sm text-gray-500 mb-2">
        Fecha de publicación: {{ comic()?.onsaleDate | date : "longDate" }}
      </p>
      } @if (comic()?.price !== undefined) {
      <p class="price text-xl mb-4">
        Precio: ${{ comic()?.price?.toFixed(2) }}
      </p>
      }
      <div class="flex flex-wrap gap-5 md:gap-25">
        @if (comic()?.creators?.length) {
        <div class="mb-4">
          <h3 class="text-lg font-semibold">Autores:</h3>
          <ul class="list-disc pl-6">
            @for (creator of comic()?.creators; track creator.name) {
            <li>{{ creator.name }} ({{ creator.role }})</li>
            }
          </ul>
        </div>
        } @if (comic()?.characters?.length) {
        <div class="mb-4">
          <h3 class="text-lg font-semibold">Personajes:</h3>
          <ul class="list-disc pl-6">
            @for (character of comic()?.characters; track character) {
            <li>{{ character }}</li>
            }
          </ul>
        </div>
        }
      </div>

      <!-- Botón de favorito -->
      <button
        (click)="toggleFavorite()"
        class="p-2 rounded-full hover:bg-zinc-800 transition flex gap-[10px] items-center text-md text-zinc-600"
        [attr.aria-label]="
          isFavorite() ? 'Quitar de favoritos' : 'Agregar a favoritos'
        "
      >
        @if (isFavorite()) {
        <!-- Corazón lleno (rojo) -->
        <p class="text-red-400">Quitar de favoritos</p>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 24 24"
          class="w-6 h-6 text-red-500"
        >
          <path
            fill-rule="evenodd"
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 3.99 4 6.5 4 
               c1.74 0 3.41 1.01 4.22 2.53h.56C13.09 5.01 14.76 4 16.5 4 
               19.01 4 21 6 21 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            clip-rule="evenodd"
          />
        </svg>
        } @else {
        <!-- Corazón vacío -->
        <p>Agregar a favoritos</p>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          class="w-6 h-6 text-zinc-300"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4.318 6.318a4.5 4.5 0 016.364 0L12 
               7.636l1.318-1.318a4.5 4.5 0 116.364 
               6.364L12 21.364l-7.682-7.682a4.5 
               4.5 0 010-6.364z"
          />
        </svg>
        }
      </button>
    </div>
  </div>
  } @else if (isLoading()) {
  <app-loader [visible]="isLoading()"></app-loader>
  } @else {
  <div class="p-6 text-center text-red-500">Cómic no encontrado.</div>
  }
</article>
